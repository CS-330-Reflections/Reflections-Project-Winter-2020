<html>
    <head>
        <title>Old Entries</title>
    </head>
    <body id="container">
      <main>
          <header>
            <h1>
        <img src = "reflections.png"></i>
      </h1>
          </header><br>

          <form action="">

            <div class="prompt-filter">
            <label for="prompt-filter">Filter by prompt:</label>
            <select id="prompt-filter" name="prompt-filter" onchange="promptSelector()">
                <option value="null" id="0"> No filter </option>
                <option value="free_entry" id="1"> Free entry</option>
                <option value="prompt1" id="2"> What was the best thing about your day?</option>
                <option value="prompt2" id="3"> What was something that inspired you today?</option>
                <option value="prompt3" id="4"> What happened today that was out of the ordinary? </option>
                <option value="prompt4" id="5"> Walk through your whole day. </option>
                <option value="prompt5" id="6"> What did you want to be when you were a child? </option>
                <option value="prompt6" id="7"> What were the major decisions that led you to this point in life? </option>
            </select>
          </div>


          <label for="mood-filter">Filter by mood:</label>
        <div class="mood-filter">
              <!-- <button type="button" id="mood-button">Add a mood</button> -->
              <select id="mood-filter" class="mood-filter" onchange="moodSelector()">
                <option value="null"> <i id="null" class="fas fa-smile"> No filter </i></option>
                  <option value="happy"> <i id="happy" class="fas fa-smile"> Happy</i></option>
                  <option value="surprised"> <i id="surprised" class="fas fa-surprise">Surprised</i></option>
                  <option value="confident"><i id="confident" class="fas fa-smile-wink">Confident</i></option>
                  <option value="indifferent"><i id="indifferent"  class="fas fa-meh">Indifferent</i></option>
                  <option value="annoyed"><i id="annoyed" class="fas fa-meh-rolling-eyes">Annoyed</i></option>
                  <option value="apprehensive"><i id="apprehensive" class="fas fa-grimace">Apprehensive</i></option>
                  <option value="sad"><i id="sad" class="fas fa-frown"></i>Sad</option>
                  <option value="hurt">  <i id="hurt" class="fas fa-sad-cry">Hurt</i></option>
                  <option value="angry"><i id="angry" class="fas fa-angry">Angry</i></option>
                </select>
              </div>


          <button type="button" class="filter_button" onclick="returnVals()">Filter</button>


          <div class="past-entries">
            <p id="prev-entries"></p>
          </div>

          <script src="https://kit.fontawesome.com/62a7c74d0d.js" crossorigin="anonymous"></script>



          <script>


        const promptList = [
              "No filter",
              "Free entry",
              "What was the best thing about your day?",
              "What was something that inspired you today?",
              "What happened today that was out of the ordinary?",
              "Walk through your whole day.",
              "What did you want to be when you were a child?",
              "What were the major decisions that led you to this point in life?"]

          var promptPicked = "null";
          var moodPicked = "null";
          var promptPickedID = "null";


          function promptSelector() {
            console.log(document.getElementById('prompt-filter').value);
            promptPicked = document.getElementById('prompt-filter').value;
            promptPickedID = document.getElementById('prompt-filter').id;
            console.log(promptPicked);
          };

          function moodSelector() {
            console.log(document.getElementById('mood-filter').value);
            moodPicked = document.getElementById('mood-filter').value;
          }


          var entryStorage = (JSON.parse(window.localStorage.getItem('data')));


          function returnVals() {

            if (promptPicked == "null" && moodPicked == "null")
            {
              console.log("nothing picked")
            }

            else if (promptPicked != "null" && moodPicked == "null") {
              var filtered = entryStorage.filter(a=>a.prompt==promptPicked);
              console.log(filtered);
            }

            else if (promptPicked == "null" && moodPicked != "null") {
              var filtered = entryStorage.filter(a=>a.mood==moodPicked);
              console.log(filtered);
            }

            else {
              console.log(entryStorage[0])
              var filtered = entryStorage.filter(a=>(a.mood.includes(moodPicked) && a.prompt == promptPicked));
              console.log(filtered);
            }

              document.getElementById('prev-entries').innerHTML = "Past entries:";
              for (elem in filtered) {
                console.log(filtered[elem].prompt)
        //        let Prompt_ = document.querySelector(prompt2).innerHTML;
      //          console.log(Prompt_)
                document.getElementById('prev-entries').innerHTML += `
                <div class="past-entries">
                  <p id="prev-entries">

                  Date: "${filtered[elem].date}";
                  Mood: "${filtered[elem].mood}";
                  Visual: "${filtered[elem].visual}";
                  Prompt: "${promptPickedID}";
                  Entry: "${filtered[elem].entry}";

                  </p> <br> <br>
                </div>
            `;}

              JSON.stringify(filtered);

            return filtered;
          }

          </script>

            </div>
        </main>
    </body>
</html>
