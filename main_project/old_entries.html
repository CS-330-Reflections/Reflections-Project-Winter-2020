<html>
    <head>
        <title>Old Entries</title>
        <link rel="stylesheet" href="old_entries.css">
    </head>
    <body id="container">
      <main>
          <header>
            <h1>
              reflections.
              <i class="fas fa-home" onclick="toMain()"></i>
            </h1>
          </header><br>

          <form action="">

            <div class="prompt-filter">
            <label for="prompt-filter"></label>
            <select id="prompt-filter" name="prompt-filter" onchange="promptSelector()">
                <option value="null" id="null"> Prompt </option>
                <option value="free_entry" id="free_entry"> Free entry</option>
                <option value="prompt1" id="prompt1"> What was the best thing about your day?</option>
                <option value="prompt2" id="prompt2"> What was something that inspired you today?</option>
                <option value="prompt3" id="prompt3"> What happened today that was out of the ordinary? </option>
                <option value="prompt4" id="prompt4"> Walk through your whole day. </option>
                <option value="prompt5" id="prompt5"> What did you want to be when you were a child? </option>
                <option value="prompt6" id="prompt6"> What were the major decisions that led you to this point in life? </option>
            </select>
          </div>

          <div class="mood-filter">
          <label for="mood-filter"></label>
              <!-- <button type="button" id="mood-button">Add a mood</button> -->
              <select id="mood-filter" class="mood-filter" onchange="moodSelector()">
                <option value="null"> <i id="null" class="fas fa-smile"> Mood </i></option>
                  <option value="happy"> <i id="happy" class="fas fa-smile"> Happy</i></option>
                  <option value="surprised"> <i id="surprised" class="fas fa-surprise">Surprised</i></option>
                  <option value="confident"><i id="confident" class="fas fa-smile-wink">Confident</i></option>
                  <option value="indifferent"><i id="indifferent"  class="fas fa-meh">Indifferent</i></option>
                  <option value="annoyed"><i id="annoyed" class="fas fa-meh-rolling-eyes">Annoyed</i></option>
                  <option value="apprehensive"><i id="apprehensive" class="fas fa-grimace">Apprehensive</i></option>
                  <option value="sad"><i id="sad" class="fas fa-frown"></i>Sad</option>
                  <option value="hurt">  <i id="hurt" class="fas fa-sad-cry">Hurt</i></option>
                  <option value="angry"><i id="angry" class="fas fa-angry">Angry</i></option>
                </select>
              </div>


          <button type="button" class="filter_button" onclick="returnVals()">Filter</button>


          <div class="past-entries">
            <p id="prev-entries"></p>
          </div>

          <script src="https://kit.fontawesome.com/62a7c74d0d.js" crossorigin="anonymous"></script>



          <script>


          var promptPicked = "null";
          var moodPicked = "null";
          var promptPickedInnerHTML = "null";


          function promptSelector() {
            console.log(document.getElementById('prompt-filter').value);
            promptPicked = document.getElementById('prompt-filter').value;
            promptPickedInnerHTML = document.getElementById(promptPicked).innerHTML;
            console.log(promptPickedInnerHTML);
          };

          function moodSelector() {
            console.log(document.getElementById('mood-filter').value);
            moodPicked = document.getElementById('mood-filter').value;
          }


          var entryStorage = (JSON.parse(window.localStorage.getItem('data')));


          function returnVals() {

            if (promptPicked == "null" && moodPicked == "null")
            {
              var filtered = entryStorage;
              var i;
              for(i=0; i<filtered.length; i++){
                if(filtered[i].prompt == "free_entry"){
                  filtered[i].prompt = "Free Entry";
                }
                else if (filtered[i].prompt == "prompt1"){
                  filtered[i].prompt = "What was the best thing about your day?";
                }
                else if (filtered[i].prompt == "prompt2"){
                  filtered[i].prompt = "What was something that inspired you today?";
                }
                else if (filtered[i].prompt == "prompt3"){
                  filtered[i].prompt = "What happened today that was out of the ordinary?";
                }
                else if (filtered[i].prompt == "prompt4"){
                  filtered[i].prompt = "Walk through your whole day.";
                }
                else if (filtered[i].prompt == "prompt5"){
                  filtered[i].prompt = "What did you want to be when you were a child?";
                }
                else if (filtered[i].prompt == "prompt6"){
                  filtered[i].prompt = "hat were the major decisions that led you to this point in life?";
                }
              }
            }

            else if (promptPicked != "null" && moodPicked == "null") {
              var filtered = entryStorage.filter(a=>a.prompt==promptPicked);
              var i;
              for(i=0; i<filtered.length; i++){
                if(filtered[i].prompt == "free_entry"){
                  filtered[i].prompt = "Free Entry";
                }
                else if (filtered[i].prompt == "prompt1"){
                  filtered[i].prompt = "What was the best thing about your day?";
                }
                else if (filtered[i].prompt == "prompt2"){
                  filtered[i].prompt = "What was something that inspired you today?";
                }
                else if (filtered[i].prompt == "prompt3"){
                  filtered[i].prompt = "What happened today that was out of the ordinary?";
                }
                else if (filtered[i].prompt == "prompt4"){
                  filtered[i].prompt = "Walk through your whole day.";
                }
                else if (filtered[i].prompt == "prompt5"){
                  filtered[i].prompt = "What did you want to be when you were a child?";
                }
                else if (filtered[i].prompt == "prompt6"){
                  filtered[i].prompt = "hat were the major decisions that led you to this point in life?";
                }
              }
            }

            else if (promptPicked == "null" && moodPicked != "null") {
              var filtered = entryStorage.filter(a=>a.mood==moodPicked);
              var i;
              for(i=0; i<filtered.length; i++){
                if(filtered[i].prompt == "free_entry"){
                  filtered[i].prompt = "Free Entry";
                }
                else if (filtered[i].prompt == "prompt1"){
                  filtered[i].prompt = "What was the best thing about your day?";
                }
                else if (filtered[i].prompt == "prompt2"){
                  filtered[i].prompt = "What was something that inspired you today?";
                }
                else if (filtered[i].prompt == "prompt3"){
                  filtered[i].prompt = "What happened today that was out of the ordinary?";
                }
                else if (filtered[i].prompt == "prompt4"){
                  filtered[i].prompt = "Walk through your whole day.";
                }
                else if (filtered[i].prompt == "prompt5"){
                  filtered[i].prompt = "What did you want to be when you were a child?";
                }
                else if (filtered[i].prompt == "prompt6"){
                  filtered[i].prompt = "hat were the major decisions that led you to this point in life?";
                }
              }
            }

            else {
              console.log("nothing picked");
            }

              document.getElementById('prev-entries').innerHTML = "Past entries:";
              for (elem in filtered) {
                console.log(filtered[elem].prompt)
        //        let Prompt_ = document.querySelector(prompt2).innerHTML;
      //          console.log(Prompt_)
                document.getElementById('prev-entries').innerHTML += `
                <div class="past-entries">
                  <p id="prev-entries">

                  Date: ${filtered[elem].date} <br>
                  Mood: ${filtered[elem].mood} <br>
                  Visual: ${filtered[elem].visual} <br>
                  Prompt: ${filtered[elem].prompt} <br>
                  Entry: ${filtered[elem].entry} <br>

                  </p> <br> <br>
                </div>
            `;}

              JSON.stringify(filtered);

            return filtered;
          }

          function toMain(){
            window.location.href = "index.html";
          }

          </script>

        </main>
    </body>
</html>
